<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-6">
    <nav class="flex mb-4" aria-label="Breadcrumb">
      <ol class="flex items-center space-x-2">
        <li><%= link_to "Оборудование FIDS", fids_equipments_path, class: "text-gray-500 hover:text-gray-700" %></li>
        <li class="flex items-center">
          <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
          </svg>
          <span class="ml-2 text-gray-700"><%= @equipment.name %></span>
        </li>
      </ol>
    </nav>
    <div class="flex justify-between items-start">
      <div>
        <h1 class="text-2xl font-bold text-gray-900"><%= @equipment.name %></h1>
        <div class="mt-2 flex items-center space-x-4">
          <span class="px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full <%= @equipment.status_color %>">
            <%= @equipment.status_text %>
          </span>
          <span class="text-sm text-gray-500">Инв. № <%= @equipment.inventory_number %></span>
        </div>
      </div>
      <div class="flex space-x-3">
        <%= link_to edit_fids_equipment_path(@equipment), class: "inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50" do %>
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
          </svg>
          Редактировать
        <% end %>
        <%= link_to fids_equipment_path(@equipment),
            data: { turbo_method: :delete, turbo_confirm: "Вы уверены?" },
            class: "inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50" do %>
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
          Удалить
        <% end %>
      </div>
    </div>
  </div>

  <!-- Info Card -->
  <div class="bg-white shadow rounded-lg mb-6">
    <div class="px-4 py-5 sm:p-6">
      <h3 class="text-lg font-medium text-gray-900 mb-4">Основная информация</h3>
      <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
        <div>
          <dt class="text-sm font-medium text-gray-500">Название</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @equipment.name %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Тип оборудования</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @equipment.equipment_type %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Модель</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @equipment.equipment_model.presence || "—" %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Серийный номер</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @equipment.serial_number.presence || "—" %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Инвентарный номер</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @equipment.inventory_number %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Статус</dt>
          <dd class="mt-1">
            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full <%= @equipment.status_color %>">
              <%= @equipment.status_text %>
            </span>
          </dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Место установки</dt>
          <dd class="mt-1 text-sm text-gray-900">
            <% if @equipment.fids_installation %>
              <%= link_to @equipment.fids_installation.name, fids_installation_path(@equipment.fids_installation), class: "text-green-600 hover:text-green-900" %>
            <% else %>
              <span class="text-gray-400">Не указано</span>
            <% end %>
          </dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Последнее действие</dt>
          <dd class="mt-1 text-sm text-gray-900">
            <% if @equipment.last_action_date %>
              <%= l @equipment.last_action_date, format: :long %>
            <% else %>
              <span class="text-gray-400">—</span>
            <% end %>
          </dd>
        </div>
        <div class="sm:col-span-2">
          <dt class="text-sm font-medium text-gray-500">Примечания</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @equipment.notes.presence || "—" %></dd>
        </div>
      </dl>
    </div>
  </div>

  <!-- System Info -->
  <div class="bg-white shadow rounded-lg">
    <div class="px-4 py-5 sm:p-6">
      <h3 class="text-lg font-medium text-gray-900 mb-4">Системная информация</h3>
      <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
        <div>
          <dt class="text-sm font-medium text-gray-500">Создано</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= l @equipment.created_at, format: :long %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Обновлено</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= l @equipment.updated_at, format: :long %></dd>
        </div>
        <div class="sm:col-span-2">
          <dt class="text-sm font-medium text-gray-500">Последнее изменение</dt>
          <dd class="mt-1 text-sm text-gray-900">
            <% last_audit = @equipment.audits.includes(:user).order(created_at: :desc).first %>
            <% if last_audit && last_audit.user %>
              <div class="flex items-center">
                <div class="h-8 w-8 rounded-full bg-green-500 flex items-center justify-center text-white text-xs font-medium">
                  <%= last_audit.user.initials || '?' %>
                </div>
                <div class="ml-2">
                  <span class="font-medium"><%= last_audit.user.full_name %></span>
                  <span class="text-gray-500">• <%= l last_audit.created_at, format: :long %></span>
                </div>
              </div>
            <% else %>
              <span class="text-gray-400">—</span>
            <% end %>
          </dd>
        </div>
      </dl>
    </div>
  </div>
</div>
