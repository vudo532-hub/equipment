<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-6 flex justify-between items-start">
    <div>
      <%= link_to fids_installations_path, class: "inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-2" do %>
        <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        Назад к списку
      <% end %>
      <h1 class="text-2xl font-bold text-gray-900"><%= @installation.name %></h1>
      <span class="mt-1 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
        <%= @installation.installation_type %>
      </span>
    </div>
    <div class="flex space-x-3">
      <%= link_to edit_fids_installation_path(@installation), class: "inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50" do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
        </svg>
        Редактировать
      <% end %>
      <% if can_delete? %>
        <%= link_to fids_installation_path(@installation),
            data: { turbo_method: :delete, turbo_confirm: "Вы уверены?" },
            class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700" do %>
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
          Удалить
        <% end %>
      <% else %>
        <%= link_to "#",
            onclick: "alert('Удаление недоступно для вашей роли'); return false;",
            class: "inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-400 bg-gray-100 cursor-not-allowed" do %>
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
          Удалить
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- Details Card -->
  <div class="bg-white shadow rounded-lg mb-6">
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-lg font-medium text-gray-900">Информация</h2>
    </div>
    <div class="px-6 py-4">
      <dl class="grid grid-cols-1 sm:grid-cols-2" style="gap: 16px;">
        <div>
          <dt class="text-sm font-medium text-gray-500">Название</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @installation.name %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Тип установки</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @installation.installation_type %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Идентификатор</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @installation.identifier || "—" %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Количество оборудования</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @installation.equipment_count %> шт.</dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Создано</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= l @installation.created_at, format: :long %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Обновлено</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= l @installation.updated_at, format: :long %></dd>
        </div>
      </dl>
    </div>
  </div>

  <!-- Equipment List (placeholder for Stage 4) -->
  <div class="bg-white shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
      <h2 class="text-lg font-medium text-gray-900">Оборудование</h2>
      <%# TODO: Add link when equipment CRUD is ready %>
    </div>
    <div class="p-6">
      <% if @installation.fids_equipments.any? %>
        <ul class="divide-y divide-gray-200">
          <% @installation.fids_equipments.each do |equipment| %>
            <li class="py-3 flex justify-between items-center">
              <div>
                <p class="text-sm font-medium text-gray-900"><%= equipment.equipment_type %> — <%= equipment.equipment_model %></p>
                <p class="text-sm text-gray-500"><%= equipment.serial_number %></p>
              </div>
              <span class="px-2 py-1 text-xs rounded-full <%= equipment.status_color %>">
                <%= equipment.status_text %>
              </span>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="text-sm text-gray-500 text-center py-4">Оборудование не добавлено</p>
      <% end %>
    </div>
  </div>
</div>
